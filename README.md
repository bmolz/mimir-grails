# mimir-grails

This is a Grails 3.3 rest profile web server. Grails uses Groovy on top of Spring with Hibernate, and gson views.

Requires Java to be installed, database is embedded h2.

To start server:
```
./gradlew tasks bootRun
```
There are .jar wrappers so no additional install is required.
On windows replace with ./gradlew.bat

When you see `Grails application running at http://localhost:8080 in environment: development
` that will indicate the website is available

Most of the relevant source code can be found in ./grails-app/ under the domain/, controllers/, services/, and views/ directories.

The api profiles are automatically consumed/imported on bootstrap or can be POST to /api/import.

The first time accessing the webserver will intercept and authenticate as player using Spring Security. All subsequent requests should be valid.

You can change users by navigating to /login/auth/{new username}


#### Testing
To run unit tests: (just the autogenerated tests for now)
```
./gradlew tasks test

```
There is an included postman collection for testing.

You can view the database data at <http://localhost:8080/dbconsole/> using JDBC URL:
`jdbc:h2:file:./build/h2db` to Connect.

#### [Relevant Endpoints](https://github.com/bmolz/mimir-grails/blob/master/grails-app/controllers/mimir/grails/UrlMappings.groovy)
```
"/api/question"(controller:'question', action:'show', method:'GET')
"/api/question"(controller:'question', action:'save', method:'POST')
"/api/question/answer/$id"(controller:'question', action:'answer', id:"$id", method:'POST')

"/api/leaderboard"(resource:'statistics')
"/api/import"(resource:'importProfilesURL')
"/login/auth/$id"(controller:'profile', action:'login', id:"$id")

"/api/profile"(resources:'profile') {
    "/social"(resources:'socialLink')
    "/picture"(resources:'picture')
}
```
